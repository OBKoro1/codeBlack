<!--
 * Author       : OBKoro1
 * Date         : 2020-04-15 17:21:59
 * LastEditors: OBKoro1
 * LastEditTime: 2020-06-07 14:35:38
 * FilePath: /codeBlack/算法题/15三数之和.html
 * Description  : 15三数之和
 * https://github.com/OBKoro1
 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>15三数之和</title>
</head>

<body>
  <script>
    let oldArr = [-1, 0, 1, 2, -1, -4]

    /**
     * @param {number[]} nums
     * @return {number[][]}
     */
    var threeSum = function (nums) {
      let ans = [];
      const len = nums.length;
      if (nums == null || len < 3) return ans;
      nums.sort((a, b) => a - b); // 排序
      for (let i = 0; i < len; i++) {
        if (nums[i] > 0) break; // 如果当前数字大于0，则三数之和一定大于0，所以结束循环
        if (i > 0 && nums[i] === nums[i - 1]) continue; // 当前值跟上一个值重复 上面左右指针已经相加过 会导致结果重复 跳过后面的
        let L = i + 1; // 左指针比当前值大
        let R = len - 1; // 右指针
        while (L < R) { // 当前值 穷尽可能为0
          const sum = nums[i] + nums[L] + nums[R];
          if (sum == 0) {
            ans.push([nums[i], nums[L], nums[R]]);
            while (L < R && nums[L] === nums[L + 1]) L++; // 指针值相同 跳过 否则会添加重复值 
            while (L < R && nums[R] === nums[R - 1]) R--; // 指针值相同 跳过  否则会添加重复值
            L++;
            R--;
          }
          else if (sum < 0) L++; //小于0 左侧值过小
          else if (sum > 0) R--; // 大于0 右侧值过大
        }
      }
      return ans;
    };
    
    // 有重复值
    var threeSum2 = function (nums) {
      let res = []
      let hash = {}
      for (let i = 0; i < nums.length - 2; i++) { // 第一位
        for (let j = i + 1; j < nums.length - 1; j++) { // 第二位 并且留出一个人的空间
          if (hash[nums[j]] !== undefined) {
            res.push(hash[nums[j]].concat([nums[j]]))
            hash[nums[j]] = undefined // 找到一组 继续找下一组
          } else {
            const mark = 0 - nums[i] - nums[j] // 最后一位数
            hash[mark] = [nums[i], nums[j]]
          }
        }
      }
      return res
    };

    console.log('输出', threeSum(oldArr))
  </script>
</body>

</html>